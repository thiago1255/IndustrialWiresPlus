if (( 32768 - energyStorage.getEnergyStored() ) < maxvalue){
                        quantityenergy = ( 32768 - energyStorage.getEnergyStored() );
                    }
                    else {
                        quantityenergy = maxvalue;
                    }
		       //WARNING: THIS WILL CREATE ENERGY IF THERE ARE NOT ENERGY ON GRID, THIS WILL BE FIXED IN 1.8-13
		       outputEnergy(quantityenergy, false, 0);
                       energyStorage.modifyEnergyStored(+quantityenergy);
		       //WARNING: THIS WILL CREATE ENERGY IF THERE ARE NOT ENERGY ON GRID, THIS WILL BE FIXED IN 1.8-13
		    //exit to grid:
                    /*
                    quantityenergy = 0;
                    if (energyStorage.getEnergyStored() <= maxvalue){
                        quantityenergy = energyStorage.getEnergyStored();
                    }
                    else {
                        quantityenergy = maxvalue;
                    }
                       //WARNING: THIS WILL DELETE ENERGY EVEN IF THERE ARE NO NEED OF ENERGY ON GRID
		       addAvailableEnergy(quantityenergy, null);
                       energyStorage.modifyEnergyStored(-quantityenergy);
		       //WARNING: THIS WILL DELETE ENERGY EVEN IF THERE ARE NO NEED OF ENERGY ON GRID   
                    */        
